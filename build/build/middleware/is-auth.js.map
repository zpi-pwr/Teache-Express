{"version":3,"sources":["../../middleware/is-auth.js"],"names":["_jsonwebtoken","require","_jsonwebtoken2","_interopRequireDefault","obj","__esModule","default","module","exports","req","res","next","authHeader","get","isAuth","token","split","decodedToken","verify","err","userId"],"mappings":"AAAA;;AAEA,IAAIA,gBAAgBC,QAAQ,cAAR,CAApB;;AAEA,IAAIC,iBAAiBC,uBAAuBH,aAAvB,CAArB;;AAEA,SAASG,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/FG,OAAOC,OAAP,GAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACvC,QAAIC,aAAaH,IAAII,GAAJ,CAAQ,eAAR,CAAjB;AACA,QAAI,CAACD,UAAL,EAAiB;AACbH,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;;AAED,QAAII,QAAQH,WAAWI,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAZ,CAPuC,CAOD;AACtC,QAAI,CAACD,KAAD,IAAUA,UAAU,EAAxB,EAA4B;AACxB,eAAOJ,MAAP;AACH;AACD,QAAIM,eAAe,KAAK,CAAxB;AACA,QAAI;AACAA,uBAAef,eAAeI,OAAf,CAAuBY,MAAvB,CAA8BH,KAA9B,EAAqC,oBAArC,CAAf;AACH,KAFD,CAEE,OAAOI,GAAP,EAAY;AACVV,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;AACD,QAAI,CAACM,YAAL,EAAmB;AACfR,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;AACDF,QAAIK,MAAJ,GAAa,IAAb;AACAL,QAAIW,MAAJ,GAAaH,aAAaG,MAA1B;AACAT;AACH,CAzBD;AA0BA","file":"is-auth.js","sourcesContent":["'use strict';\n\nvar _jsonwebtoken = require('jsonwebtoken');\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = function (req, res, next) {\n    var authHeader = req.get('Authorization');\n    if (!authHeader) {\n        req.isAuth = false;\n        return next();\n    }\n\n    var token = authHeader.split(' ')[1]; //Authorization: Bearer hereisToken\n    if (!token || token === '') {\n        return next();\n    }\n    var decodedToken = void 0;\n    try {\n        decodedToken = _jsonwebtoken2.default.verify(token, \"somesupersecretkey\");\n    } catch (err) {\n        req.isAuth = false;\n        return next();\n    }\n    if (!decodedToken) {\n        req.isAuth = false;\n        return next();\n    }\n    req.isAuth = true;\n    req.userId = decodedToken.userId;\n    next();\n};\n//# sourceMappingURL=is-auth.js.map"]}