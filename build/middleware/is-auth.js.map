{"version":3,"sources":["../../middleware/is-auth.js"],"names":["module","exports","req","res","next","authHeader","get","isAuth","token","split","decodedToken","jwt","verify","err","userId"],"mappings":";;AAAA;;;;;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAChC,QAAMC,aAAaH,IAAII,GAAJ,CAAQ,eAAR,CAAnB;AACD,QAAG,CAACD,UAAJ,EAAe;AACXH,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;;AAED,QAAMI,QAAQH,WAAWI,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAd,CAPiC,CAOM;AACvC,QAAG,CAACD,KAAD,IAAUA,UAAU,EAAvB,EAA0B;AACtB,eAAOJ,MAAP;AACH;AACD,QAAIM,qBAAJ;AACA,QAAG;AACCA,uBAAeC,uBAAIC,MAAJ,CAAWJ,KAAX,EAAkB,oBAAlB,CAAf;AACH,KAFD,CAEC,OAAMK,GAAN,EAAU;AACPX,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;AACD,QAAG,CAACM,YAAJ,EAAiB;AACbR,YAAIK,MAAJ,GAAa,KAAb;AACA,eAAOH,MAAP;AACH;AACDF,QAAIK,MAAJ,GAAa,IAAb;AACAL,QAAIY,MAAJ,GAAaJ,aAAaI,MAA1B;AACAV;AACH,CAzBD","file":"is-auth.js","sourcesContent":["import jwt from \"jsonwebtoken\";\n\nmodule.exports = (req, res, next) => {\n     const authHeader = req.get('Authorization');\n    if(!authHeader){\n        req.isAuth = false;\n        return next();\n    }\n    \n    const token = authHeader.split(' ')[1];//Authorization: Bearer hereisToken\n    if(!token || token === ''){\n        return next();\n    }\n    let decodedToken;\n    try{\n        decodedToken = jwt.verify(token, \"somesupersecretkey\");\n    }catch(err){\n        req.isAuth = false;\n        return next();\n    }\n    if(!decodedToken){\n        req.isAuth = false;\n        return next();\n    }\n    req.isAuth = true;\n    req.userId = decodedToken.userId;\n    next();\n}"]}